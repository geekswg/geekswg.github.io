(()=>{var _=class{forEach(e,t){e=e||[];for(let i=0;i<e.length;i++)t(e[i])}getScrollTop(){return(document.documentElement??document.body).scrollTop}isMobile(){return window.matchMedia("only screen and (max-width: 680px)").matches}isTocStatic(){return window.matchMedia("only screen and (max-width: 960px)").matches}animateCSS(e,t,i,n){!Array.isArray(t)&&(t=[t]),e.classList.add("animate__animated",...t),e.addEventListener("animationend",()=>{!i&&e.classList.remove("animate__animated",...t),typeof n=="function"&&n()},{once:!0})}isValidDate(e){return e instanceof Date&&!isNaN(e.getTime())}scrollIntoView(e){(e.startsWith("#")?document.getElementById(e.slice(1)):document.querySelector(e))?.scrollIntoView({behavior:"smooth"})}};var D=class{constructor(){this.config=window.config,this.data=this.config.data||[],this.isDark=document.body.dataset.theme==="dark",this.util=new _,this.newScrollTop=this.util.getScrollTop(),this.oldScrollTop=this.newScrollTop,this.scrollEventSet=new Set,this.resizeEventSet=new Set,this.switchThemeEventSet=new Set,this.clickMaskEventSet=new Set,this.beforeprintEventSet=new Set,this.disableScrollEvent=!1,window.objectFitImages&&objectFitImages()}initThemeColor(){let e=document.querySelector('[name="theme-color"]');e&&(this._themeColorOnSwitchTheme=this._themeColorOnSwitchTheme||(()=>{e.content=this.isDark?e.dataset.dark:e.dataset.light}),this.switchThemeEventSet.add(this._themeColorOnSwitchTheme),this._themeColorOnSwitchTheme())}initSVGIcon(){this.util.forEach(document.querySelectorAll("[data-svg-src]"),e=>{fetch(e.dataset.svgSrc).then(t=>t.text()).then(t=>{let i=document.createElement("div");i.insertAdjacentHTML("afterbegin",t);let n=i.firstChild;n.dataset.svgSrc=e.dataset.svgSrc,n.classList.add("icon");let s=n.getElementsByTagName("title");s.length&&n.removeChild(s[0]),e.parentElement.replaceChild(n,e)}).catch(t=>{console.error(t)})})}initTwemoji(){this.config.twemoji&&twemoji.parse(document.body)}initMenu(){this.initMenuDesktop(),this.initMenuMobile()}initMenuDesktop(){this.util.forEach(document.querySelectorAll(".has-children"),e=>{e.querySelector(".sub-menu").style.minWidth=`${e.offsetWidth-8}px`})}initMenuMobile(){let e=document.getElementById("menu-toggle-mobile"),t=document.getElementById("menu-mobile");e.addEventListener("click",i=>{document.body.classList.toggle("blur"),e.classList.toggle("active"),t.classList.toggle("active"),this.disableScrollEvent=document.body.classList.contains("blur")},!1),this._menuMobileOnClickMask=this._menuMobileOnClickMask||(()=>{e.classList.remove("active"),t.classList.remove("active")}),this.clickMaskEventSet.add(this._menuMobileOnClickMask),this.util.forEach(document.querySelectorAll(".menu-item>.nested-item"),i=>{i.addEventListener("click",function(){this.parentNode.querySelector(".sub-menu").classList.toggle("open"),this.querySelector(".dropdown-icon").classList.toggle("open")})})}initSwitchTheme(){this.util.forEach(document.getElementsByClassName("theme-switch"),e=>{e.addEventListener("click",()=>{document.body.dataset.theme=document.body.dataset.theme==="dark"?"light":"dark",this.isDark=!this.isDark,window.localStorage?.setItem("theme",this.isDark?"dark":"light");for(let t of this.switchThemeEventSet)t()},!1)})}initSearch(){let e=this.config.search,t=this.util.isMobile();if(!e||t&&this._searchMobileOnce||!t&&this._searchDesktopOnce)return;let i=e.maxResultLength??10,n=e.snippetLength??50,s=e.highlightTag??"em",c=e.isCaseSensitive??!1,h=e.minMatchCharLength??1,a=e.findAllMatches??!1,l=e.location??0,d=e.threshold??.3,o=e.distance??100,r=e.ignoreLocation??!1,x=e.useExtendedSearch??!1,R=e.ignoreFieldNorm??!1,v=t?"mobile":"desktop",L=document.getElementById(`header-${v}`),M=document.getElementById(`search-input-${v}`),z=document.getElementById(`search-toggle-${v}`),C=document.getElementById(`search-loading-${v}`),f=document.getElementById(`search-clear-${v}`);t?(this._searchMobileOnce=!0,M.addEventListener("focus",()=>{this.disableScrollEvent=!0,document.body.classList.add("blur"),L.classList.add("open")},!1),document.getElementById("search-cancel-mobile").addEventListener("click",()=>{this.disableScrollEvent=!1,L.classList.remove("open"),document.body.classList.remove("blur"),document.getElementById("menu-toggle-mobile").classList.remove("active"),document.getElementById("menu-mobile").classList.remove("active"),C.style.display="none",f.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")},!1),f.addEventListener("click",()=>{f.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")},!1),this._searchMobileOnClickMask=this._searchMobileOnClickMask||(()=>{L.classList.remove("open"),C.style.display="none",f.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")}),this.clickMaskEventSet.add(this._searchMobileOnClickMask)):(this._searchDesktopOnce=!0,z.addEventListener("click",()=>{document.body.classList.add("blur"),L.classList.add("open"),M.focus()},!1),f.addEventListener("click",()=>{f.style.display="none",this._searchDesktop&&this._searchDesktop.autocomplete.setVal("")},!1),this._searchDesktopOnClickMask=this._searchDesktopOnClickMask||(()=>{L.classList.remove("open"),C.style.display="none",f.style.display="none",this._searchDesktop&&this._searchDesktop.autocomplete.setVal("")}),this.clickMaskEventSet.add(this._searchDesktopOnClickMask)),M.addEventListener("input",()=>{M.value===""?f.style.display="none":f.style.display="inline"},!1),(()=>{let I=autocomplete(`#search-input-${v}`,{hint:!1,autoselect:!0,dropdownMenuContainer:`#search-dropdown-${v}`,clearOnSelected:!0,cssClasses:{noPrefix:!0},debug:!0},{name:"search",source:(S,E)=>{C.style.display="inline",f.style.display="none";let y=b=>{C.style.display="none",f.style.display="inline",E(b)};if(e.type==="algolia")this._algoliaIndex=this._algoliaIndex||algoliasearch(e.algoliaAppID,e.algoliaSearchKey).initIndex(e.algoliaIndex),this._algoliaIndex.search(S,{offset:0,length:i*8,attributesToHighlight:["title"],attributesToSnippet:[`content:${n}`],highlightPreTag:`<${s}>`,highlightPostTag:`</${s}>`}).then(({hits:b})=>{let m={};b.forEach(({uri:g,date:B,_highlightResult:{title:A},_snippetResult:{content:k}})=>{m[g]&&m[g].context.length>k.value||(m[g]={uri:g,title:A.value,date:B,context:k.value})}),y(Object.values(m).slice(0,i))}).catch(b=>{console.error(b),y([])});else if(e.type==="fuse"){let b=()=>{let m={};return window._index.search(S).forEach(({item:g,refIndex:B,matches:A})=>{let k=g.title,T=g.content;A.forEach(({indices:w,value:j,key:q})=>{if(q==="content"){let p=0;for(let u=0;u<w.length;u++){let $=T.substring(w[u][0]+p,w[u][1]+1+p),O=`<${s}>`+$+`</${s}>`;T=T.substring(0,w[u][0]+p)+O+T.substring(w[u][1]+1+p,T.length),p+=s.length*2+5}}else if(q==="title"){let p=0;for(let u=0;u<w.length;u++){let $=k.substring(w[u][0]+p,w[u][1]+1+p),O=`<${s}>`+$+`</${s}>`;k=k.substring(0,w[u][0]+p)+O+k.substring(w[u][1]+1+p,T.length),p+=s.length*2+5}}}),m[g.uri]={uri:g.uri,title:k,date:g.date,context:T}}),Object.values(m).slice(0,i)};window._index?y(b()):fetch(e.fuseIndexURL).then(m=>m.json()).then(m=>{let g={isCaseSensitive:c,findAllMatches:a,minMatchCharLength:h,location:l,threshold:d,distance:o,ignoreLocation:r,useExtendedSearch:x,ignoreFieldNorm:R,includeScore:!1,shouldSort:!0,includeMatches:!0,keys:["content","title"]};window._index=new Fuse(m,g),y(b())}).catch(m=>{console.error(m),y([])})}},templates:{suggestion:({title:S,date:E,context:y})=>`<div><span class="suggestion-title">${S}</span><span class="suggestion-date">${E}</span></div><div class="suggestion-context">${y}</div>`,empty:({query:S})=>`<div class="search-empty">${e.noResultsFound}: <span class="search-query">"${S}"</span></div>`,footer:({})=>{let{searchType:S,icon:E,href:y}=e.type==="algolia"?{searchType:"algolia",icon:'<i class="fa-brands fa-algolia fa-fw" aria-hidden="true"></i>',href:"https://www.algolia.com/"}:{searchType:"Fuse.js",icon:"",href:"https://fusejs.io/"};return`<div class="search-footer">Search by <a href="${y}" rel="noopener noreferrer" target="_blank">${E} ${S}</a></div>`}}});I.on("autocomplete:selected",(S,E,y,b)=>{window.location.assign(E.uri)}),t?this._searchMobile=I:this._searchDesktop=I})()}initBreadcrumb(){let e=document.querySelector(".breadcrumb-container.sticky");this.breadcrumbHeight=e?.clientHeight??0,this.breadcrumbHeight&&document.querySelector("main.container")?.style.setProperty("--fi-breadcrumb-height",`${this.breadcrumbHeight}px`)}initDetails(){this.util.forEach(document.getElementsByClassName("details"),e=>{e.querySelector(".details-summary").addEventListener("click",()=>{e.classList.toggle("open")},!1)})}initLightGallery(){this.config.lightgallery&&lightGallery(document.getElementById("content"),{plugins:[lgThumbnail,lgZoom],selector:".lightgallery",speed:400,hideBarsDelay:2e3,allowMediaOverlap:!0,exThumbImage:"data-thumbnail",toggleThumb:!0,thumbWidth:80,thumbHeight:"60px",actualSize:!1,showZoomInOutIcons:!0,licenseKey:"none"})}initHighlight(){this.util.forEach(document.querySelectorAll(".highlight > pre.chroma"),e=>{let t=document.createElement("div");t.className=e.className;let i=document.createElement("table");t.appendChild(i);let n=document.createElement("tbody");i.appendChild(n);let s=document.createElement("tr");n.appendChild(s);let c=document.createElement("td");s.appendChild(c),e.parentElement.replaceChild(t,e),c.appendChild(e)}),this.util.forEach(document.querySelectorAll(".highlight > .chroma"),e=>{let t=e.querySelectorAll("pre.chroma > code");if(t.length){let i=t[t.length-1],n=document.createElement("div");n.className="code-header "+i.className.toLowerCase();let s=document.createElement("span");s.classList.add("code-title");let c=this.data[e.parentNode.id];s.insertAdjacentHTML("afterbegin",`<i class="arrow fa-solid fa-chevron-right fa-fw" aria-hidden="true"></i><span class="title-inner">${c?.title??""}</span>`),s.addEventListener("click",()=>{e.classList.toggle("open")},!1),n.appendChild(s);let h=document.createElement("span");if(h.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-ellipsis-h fa-fw" aria-hidden="true"></i>'),h.classList.add("ellipses"),h.addEventListener("click",()=>{e.classList.add("open")},!1),n.appendChild(h),this.config.code.editable){let a=document.createElement("span");a.classList.add("edit"),a.insertAdjacentHTML("afterbegin",`<i class="fa-solid fa-key fa-fw" title="${this.config.code.editUnLockTitle}" aria-hidden="true"></i>`),a.addEventListener("click",()=>{let l=a.querySelector(".fa-key"),d=a.querySelector(".fa-lock"),o=a.parentElement.parentElement.querySelectorAll("pre.chroma"),r=o.length===2?o[1]:o[0];l?(l.classList.add("fa-lock"),l.classList.remove("fa-key"),l.title=this.config.code.editLockTitle,r.setAttribute("contenteditable",!0),r.focus()):(d.classList.add("fa-key"),d.classList.remove("fa-lock"),d.title=this.config.code.editUnLockTitle,r.setAttribute("contenteditable",!1),r.blur())},!1),n.appendChild(a)}if(this.config.code.copyTitle){let a=document.createElement("span");a.insertAdjacentHTML("afterbegin",'<i class="fa-regular fa-copy fa-fw" aria-hidden="true"></i>'),a.classList.add("copy");let l=i.innerText.trim();(this.config.code.maxShownLines<0||l.split(`
`).length<this.config.code.maxShownLines+2)&&e.classList.add("open"),a.title=this.config.code.copyTitle,a.addEventListener("click",()=>{navigator.clipboard.writeText(l).then(()=>{this.util.animateCSS(i,"animate__flash")},()=>{console.error("Clipboard write failed!","Your browser does not support clipboard API!")})},!1),n.appendChild(a)}e.insertBefore(n,e.firstChild)}})}initTable(){this.util.forEach(document.querySelectorAll(".content table"),e=>{let t=document.createElement("div");t.className="table-wrapper",e.parentElement.replaceChild(t,e),t.appendChild(e)})}initToc(){let e=document.getElementById("TableOfContents");if(e!==null){if(typeof APlayer=="function"){let t=e.cloneNode(!0);e.parentElement.replaceChild(t,e),e=t}if(document.getElementById("toc-static").dataset.kept==="true"||this.util.isTocStatic()){let t=document.getElementById("toc-content-static");e.parentElement!==t&&(e.parentElement.removeChild(e),t.appendChild(e)),this._tocOnScroll&&this.scrollEventSet.delete(this._tocOnScroll)}else{let t=document.getElementById("toc-content-auto");e.parentElement!==t&&(e.parentElement.removeChild(e),t.appendChild(e));let i=document.getElementById("toc-auto");i.style.visibility="visible",this.util.animateCSS(i,["animate__fadeIn","animate__faster"],!0);let n=document.querySelector(".post-meta");i.style.marginTop=`${n.offsetTop+n.clientHeight}px`;let s=e.querySelectorAll("a:first-child"),c=e.getElementsByTagName("li"),h=document.getElementsByClassName("heading-element"),a=document.getElementById("header-desktop").offsetHeight;document.querySelector(".container").addEventListener("resize",()=>{i.style.marginBottom=`${document.querySelector(".container").clientHeight-document.querySelector(".post-footer").offsetTop}px`}),this._tocOnScroll=this._tocOnScroll||(()=>{i.style.marginBottom=`${document.querySelector(".container").clientHeight-document.querySelector(".post-footer").offsetTop}px`,this.util.forEach(s,o=>{o.classList.remove("active")}),this.util.forEach(c,o=>{o.classList.remove("has-active")});let l=20+(document.body.dataset.headerDesktop!=="normal"?a:0)+this.breadcrumbHeight,d=h.length-1;for(let o=0;o<h.length-1;o++){let r=h[o].getBoundingClientRect().top,x=h[o+1].getBoundingClientRect().top;if(o==0&&r>l||r<=l&&x>l){d=o;break}}if(d!==-1&&s[d]){s[d].classList.add("active");let o=s[d].parentElement;for(;o!==e;)o.classList.add("has-active"),o=o.parentElement.parentElement}}),this._tocOnScroll(),this.scrollEventSet.add(this._tocOnScroll)}}}initTocListener(){let e=document.getElementById("toc-auto"),t=document.getElementById("toc-content-auto");document.querySelector("#toc-auto>.toc-title")?.addEventListener("click",()=>{let i=["animate__faster"],n=e.classList.contains("toc-hidden");i.push(n?"animate__fadeIn":"animate__fadeOut"),t.classList.remove(n?"animate__fadeOut":"animate__fadeIn"),this.util.animateCSS(t,i,!0),e.classList.toggle("toc-hidden")},!1)}initMath(){this.config.math&&renderMathInElement(document.body,this.config.math)}switchMermaidTheme(e){let t=document.getElementsByClassName("mermaid");if(t.length){let i=this.config.mermaid.themes??["default","dark","neutral"];mermaid.initialize({startOnLoad:!1,theme:e??(this.isDark?i[1]:i[0]),securityLevel:"loose"}),this.util.forEach(t,n=>{mermaid.render("svg-"+n.id,this.data[n.id],s=>{n.innerHTML=s},n)})}}initMermaid(){this.switchMermaidTheme(),this.switchThemeEventSet.add(()=>{this.switchMermaidTheme()}),this.beforeprintEventSet.add(()=>{this.switchMermaidTheme("neutral")})}initEcharts(){this.config.echarts&&(echarts.registerTheme("light",this.config.echarts.lightTheme),echarts.registerTheme("dark",this.config.echarts.darkTheme),this._echartsOnSwitchTheme=this._echartsOnSwitchTheme||(()=>{this._echartsArr=this._echartsArr||[];for(let e=0;e<this._echartsArr.length;e++)this._echartsArr[e].dispose();this._echartsArr=[],this.util.forEach(document.getElementsByClassName("echarts"),e=>{let t=echarts.init(e,this.isDark?"dark":"light",{renderer:"svg"});t.setOption(JSON.parse(this.data[e.id])),this._echartsArr.push(t)})}),this.switchThemeEventSet.add(this._echartsOnSwitchTheme),this._echartsOnSwitchTheme(),this._echartsOnResize=this._echartsOnResize||(()=>{for(let e=0;e<this._echartsArr.length;e++)this._echartsArr[e].resize()}),this.resizeEventSet.add(this._echartsOnResize))}initMapbox(){this.config.mapbox&&(mapboxgl.accessToken=this.config.mapbox.accessToken,mapboxgl.setRTLTextPlugin(this.config.mapbox.RTLTextPlugin),this._mapboxArr=this._mapboxArr||[],this.util.forEach(document.getElementsByClassName("mapbox"),e=>{let{lng:t,lat:i,zoom:n,lightStyle:s,darkStyle:c,marked:h,navigation:a,geolocate:l,scale:d,fullscreen:o}=this.data[e.id],r=new mapboxgl.Map({container:e,center:[t,i],zoom:n,minZoom:.2,style:this.isDark?c:s,attributionControl:!1});h&&new mapboxgl.Marker().setLngLat([t,i]).addTo(r),a&&r.addControl(new mapboxgl.NavigationControl,"bottom-right"),l&&r.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0}),"bottom-right"),d&&r.addControl(new mapboxgl.ScaleControl),o&&r.addControl(new mapboxgl.FullscreenControl),r.addControl(new MapboxLanguage),this._mapboxArr.push(r)}),this._mapboxOnSwitchTheme=this._mapboxOnSwitchTheme||(()=>{this.util.forEach(this._mapboxArr,e=>{let t=e.getContainer(),{lightStyle:i,darkStyle:n}=this.data[t.id];e.setStyle(this.isDark?n:i),e.addControl(new MapboxLanguage)})}),this.switchThemeEventSet.add(this._mapboxOnSwitchTheme))}initTypeit(){if(this.config.typeit){let e=this.config.typeit,t=e.speed||100,i=e.cursorSpeed||1e3,n=e.cursorChar||"|",s=e.loop??!1;Object.values(e.data).forEach(c=>{let h=a=>{let l=c[a],d=document.querySelector(`#${l}`).parentElement.dataset.loop,o=new TypeIt(`#${l}`,{strings:this.data[l],speed:t,lifeLike:!0,cursorSpeed:i,cursorChar:n,waitUntilVisible:!0,loop:d?JSON.parse(d):s,afterComplete:()=>{if(a===c.length-1){e.duration>=0&&window.setTimeout(()=>{o.destroy()},e.duration);return}o.destroy(),h(a+1)}}).go()};h(0)})}}initCommentLightGallery(e,t){document.querySelectorAll(e).forEach(i=>{let n=i.querySelectorAll(t+":not([lightgallery-loaded])");n.forEach(s=>{s.setAttribute("lightgallery-loaded","");let c=document.createElement("a");c.setAttribute("class","comment-lightgallery"),c.setAttribute("href",s.src),c.append(s.cloneNode()),s.replaceWith(c)}),n.length&&lightGallery(i,{selector:".comment-lightgallery",actualSize:!1,hideBarsDelay:2e3,speed:400})})}initComment(){if(this.config.comment?.enable){if(document.querySelector("#comments")){let e=document.querySelector(".view-comments");e.classList.remove("d-none"),e.addEventListener("click",()=>{this.util.scrollIntoView("#comments")},!1)}if(this.config.comment.expired&&document.querySelector("#comments").remove(),this.config.comment.artalk){if(this.config.comment.expired)return Artalk.LoadCountWidget({server:this.config.comment.artalk.server,site:this.config.comment.artalk.site,pvEl:this.config.comment.artalk.pvEl,countEl:this.config.comment.artalk.countEl});let e=Artalk.init(this.config.comment.artalk);return e.setDarkMode(this.isDark),this.switchThemeEventSet.add(()=>{e.setDarkMode(this.isDark)}),e.on("comments-loaded",()=>{this.config.comment.artalk.lightgallery&&this.initCommentLightGallery(".atk-comment .atk-content","img:not([atk-emoticon])")}),e}if(this.config.comment.gitalk){this.config.comment.gitalk.body=decodeURI(window.location.href);let e=new Gitalk(this.config.comment.gitalk);return e.render("gitalk"),e}if(this.config.comment.valine)return new Valine(this.config.comment.valine);if(this.config.comment.waline){if(this.config.comment.expired){this.config.comment.waline.pageview&&Waline.pageviewCount({serverURL:this.config.comment.waline.serverURL,path:window.location.pathname});return}return Waline.init(this.config.comment.waline)}if(this.config.comment.utterances){let e=this.config.comment.utterances,t=document.createElement("script");t.src="https://utteranc.es/client.js",t.setAttribute("repo",e.repo),t.setAttribute("issue-term",e.issueTerm),e.label&&t.setAttribute("label",e.label),t.setAttribute("theme",this.isDark?e.darkTheme:e.lightTheme),t.crossOrigin="anonymous",t.async=!0,document.getElementById("utterances").appendChild(t),this._utterancesOnSwitchTheme=this._utterancesOnSwitchTheme||(()=>{let i={type:"set-theme",theme:this.isDark?e.darkTheme:e.lightTheme};document.querySelector(".utterances-frame")?.contentWindow.postMessage(i,"https://utteranc.es")}),this.switchThemeEventSet.add(this._utterancesOnSwitchTheme);return}if(this.config.comment.twikoo){let e=this.config.comment.twikoo;e.lightgallery&&(e.onCommentLoaded=()=>{this.initCommentLightGallery(".tk-comments .tk-content","img:not(.tk-owo-emotion)")}),twikoo.init(e),e.commentCount&&twikoo.getCommentsCount({envId:e.envId,region:e.region,urls:[window.location.pathname],includeReply:!1}).then(function(t){let i=document.getElementById("twikoo-comment-count");i&&(i.innerHTML=t[0].count)});return}if(this.config.comment.giscus){let e=this.config.comment.giscus;this._giscusOnSwitchTheme=this._giscusOnSwitchTheme||(()=>{let t={setConfig:{theme:this.isDark?e.darkTheme:e.lightTheme}};document.querySelector(".giscus-frame")?.contentWindow.postMessage({giscus:t},"https://giscus.app")}),this.switchThemeEventSet.add(this._giscusOnSwitchTheme),this.giscus2parentMsg=window.addEventListener("message",t=>{let i=document.querySelector("#giscus>script");i&&(this._giscusOnSwitchTheme(),i.parentElement.removeChild(i))},{once:!0});return}}}initCookieconsent(){this.config.cookieconsent&&cookieconsent.initialise(this.config.cookieconsent)}getSiteTime=()=>{let e=new Date,t=new Date(this.config.siteTime),i=document.querySelector(".run-times");if(!this.util.isValidDate(t)||!i){clearInterval(this.siteTime),i&&i.parentNode.remove();return}let n=(e-t)/1e3,s=Math.floor(n/60/60/24),c=Math.floor(n/60/60-24*s),h=Math.floor(n/60-24*60*s-60*c),a=Math.floor((e-t)/1e3-24*60*60*s-60*60*c-60*h);i.innerHTML=`${s}, ${String(c).padStart(2,0)}:${String(h).padStart(2,0)}:${String(a).padStart(2,0)}`,document.querySelector(".site-time .d-none")?.classList.remove("d-none")};initSiteTime(){this.config.siteTime&&(this.siteTime=setInterval(this.getSiteTime,500),document.addEventListener("visibilitychange",()=>{if(document.hidden)return clearInterval(this.siteTime);this.siteTime=setInterval(this.getSiteTime,500)},!1))}initServiceWorker(){this.config.enablePWA&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("/service-worker.min.js",{scope:"/"}).then(function(e){}).catch(function(e){console.error("error: ",e)}),navigator.serviceWorker.ready.then(function(e){}))}initWatermark(){this.config.watermark?.enable&&new Watermark({content:this.config.watermark.content||`${document.querySelector("footer .fixit-icon")?.outerHTML??""} FixIt Theme`,appendTo:".widgets",opacity:this.config.watermark.opacity,width:this.config.watermark.width,height:this.config.watermark.height,rowSpacing:this.config.watermark.rowspacing,colSpacing:this.config.watermark.colspacing,rotate:this.config.watermark.rotate,fontSize:this.config.watermark.fontsize,fontFamily:this.config.watermark.fontfamily})}initPangu(){if(!this.config.pangu?.enable)return;let e=this.config.pangu.selector;if(e){e.startsWith("#")?pangu.spacingElementById(e.slice(1)):e.startsWith(".")?pangu.spacingElementByClassName(e.slice(1)):pangu.spacingElementByTagName(e);return}pangu.autoSpacingPage()}initFixItDecryptor(){this.decryptor=new FixItDecryptor({decrypted:()=>{this.initTwemoji(),this.initDetails(),this.initLightGallery(),this.initHighlight(),this.initTable(),this.initMath(),this.initMermaid(),this.initEcharts(),this.initTypeit(),this.initMapbox(),this.util.forEach(document.querySelectorAll(".encrypted-hidden"),e=>{e.classList.replace("encrypted-hidden","decrypted-shown")}),this.initToc(),this.initTocListener(),this.initPangu()},reset:()=>{this.util.forEach(document.querySelectorAll(".decrypted-shown"),e=>{e.classList.replace("decrypted-shown","encrypted-hidden")})}}),this.config.encryption?.shortcode&&(this.decryptor.addEventListener("decrypted",()=>{this.decryptor.initShortcodes()}),this.decryptor.initShortcodes()),this.config.encryption?.all&&this.decryptor.init()}initMDevtools(){let e=this.config?.mDevtools;if(!(typeof window.orientation>"u")){if(e==="vConsole"){let t=new VConsole({target:".widgets",theme:this.isDark?"dark":"light"});this._vConsoleOnSwitchTheme=this._vConsoleOnSwitchTheme||(()=>{t.setOption("theme",this.isDark?"dark":"light")}),this.switchThemeEventSet.add(this._vConsoleOnSwitchTheme)}e==="eruda"&&(eruda.init({defaults:{theme:this.isDark?"Dark":"Light"}}),this._erudaOnSwitchTheme=this._erudaOnSwitchTheme||(()=>{eruda.util.evalCss.setTheme(this.isDark?"Dark":"Light")}),this.switchThemeEventSet.add(this._erudaOnSwitchTheme))}}initAutoMark(){if(!this.config.autoBookmark)return;window.addEventListener("beforeunload",()=>{window.localStorage?.setItem(`fixit-bookmark/#${location.pathname}`,this.util.getScrollTop())});let e=Number(window.localStorage?.getItem(`fixit-bookmark/#${location.pathname}`));e&&location.hash===""&&window.scrollTo({top:e,behavior:"smooth"})}initReward(){let e=document.querySelectorAll('.post-reward [data-mode="fixed"]');if(!e.length)return;if(this.util.isMobile()){this.util.forEach(e,i=>{i.removeAttribute("data-mode")});return}let t=i=>{this.util.forEach(e,n=>{let s=n.parentElement.querySelector(".reward-input");s.id!==i&&(s.checked=!1)})};this.util.forEach(e,i=>{i.previousElementSibling.addEventListener("click",function(){t(this.getAttribute("for"))},!1)}),this.scrollEventSet.add(t)}onScroll(){let e=[],i=document.querySelector(".fixed-buttons"),n=document.querySelector(".back-to-top"),s=document.querySelector(".reading-progress-bar"),c;document.body.dataset.headerDesktop==="auto"&&e.push(document.getElementById("header-desktop")),document.body.dataset.headerMobile==="auto"&&e.push(document.getElementById("header-mobile")),n?.addEventListener("click",()=>{this.util.scrollIntoView("body")}),window.addEventListener("scroll",h=>{if(this.disableScrollEvent){h.preventDefault();return}let a=document.getElementById("mask");this.newScrollTop=this.util.getScrollTop();let l=this.newScrollTop-this.oldScrollTop;document.body.toggleAttribute("data-scroll",!0),c&&window.clearTimeout(c),c=window.setTimeout(()=>{document.body.toggleAttribute("data-scroll")},500),this.util.forEach(e,r=>{l>20?(r.classList.remove("animate__fadeInDown"),this.util.animateCSS(r,["animate__fadeOutUp"],!0),a.click()):l<-20&&(r.classList.remove("animate__fadeOutUp"),this.util.animateCSS(r,["animate__fadeInDown"],!0),a.click())});let d=document.body.scrollHeight-window.innerHeight,o=Math.max(Math.min(100*Math.max(this.newScrollTop,0)/d,100),0);s&&s.style.setProperty("--progress",`${o.toFixed(2)}%`),i&&(o>1?(i.classList.remove("d-none","animate__fadeOut"),this.util.animateCSS(i,["animate__fadeIn"],!0)):(i.classList.remove("animate__fadeIn"),this.util.animateCSS(i,["animate__fadeOut"],!0,()=>{i.classList.contains("animate__fadeOut")&&i.classList.add("d-none")})),n&&(n.querySelector("span").innerText=`${Math.round(o)}%`));for(let r of this.scrollEventSet)r();this.oldScrollTop=this.newScrollTop},!1)}onResize(){let e=this.util.isMobile();window.addEventListener("resize",()=>{this._resizeTimeout||(this._resizeTimeout=window.setTimeout(()=>{this._resizeTimeout=null;for(let i of this.resizeEventSet)i();this.initToc(),this.switchMermaidTheme(),this.initSearch();let t=this.util.isMobile();t!==e&&(document.getElementById("mask").click(),e=t)},100))},!1)}onClickMask(){document.getElementById("mask").addEventListener("click",()=>{if(document.body.classList.contains("blur")){for(let e of this.clickMaskEventSet)e();this.disableScrollEvent=!1,document.body.classList.remove("blur")}},!1)}beforeprint(){window.addEventListener("beforeprint",()=>{this.util.forEach(document.querySelectorAll(".chroma"),e=>{e.classList.toggle("open",!0)});for(let e of this.beforeprintEventSet)e()},!1)}init(){try{this.config.encryption?this.initFixItDecryptor():this.config.encryption?.all||(this.initTwemoji(),this.initDetails(),this.initLightGallery(),this.initHighlight(),this.initTable(),this.initMath(),this.initMermaid(),this.initEcharts(),this.initTypeit(),this.initMapbox(),this.initPangu()),this.initThemeColor(),this.initSVGIcon(),this.initMenu(),this.initSwitchTheme(),this.initSearch(),this.initBreadcrumb(),this.initCookieconsent(),this.initSiteTime(),this.initServiceWorker(),this.initWatermark(),this.initMDevtools(),this.initAutoMark(),this.initReward(),window.setTimeout(()=>{this.initComment(),this.config.encryption?.all||(this.initToc(),this.initTocListener()),this.onScroll(),this.onResize(),this.onClickMask(),this.beforeprint()},100)}catch(e){console.error(e)}}},N=()=>{window.fixit=new D,window.fixit.init()};document.readyState!=="loading"?N():document.addEventListener("DOMContentLoaded",N,!1);})();
